{% extends 'users/InfoUser.html' %}
{% load i18n %}
{% load staticfiles %}
{% load static %}
{% load dataset_extras %} <!-- dataset extras, with index customization-->
{% block extrastyle %}
    {{ block.super }}
    <!--<link rel="stylesheet" type="text/css" href="/static/dataset/css/createDataset.css">-->
    <link rel="stylesheet" type="text/css" href="/static/dataset/css/listDataset.css">
    <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
{% endblock %}
{% block content %}
    <div id="relativeContainer">
        <div id="containerPrincipal">
            <h1>Listagem dos Datasets</h1>
            {% include 'general/filterToolBarWithCheckBoxes.html' with linkAdd="sdgsdgsgd" %}
            <div id="datasetsBox">
                <table id="tabelaDatasets">
                    <thead>
                        <tr>
                            <th>Edit/Drop</th>
                            <th>Nome</th>
                            <th>Nº Classes</th>
                            <th>Nº Amostras</th>
                            <th>Data de Criação</th>
                            <th>Nº modelos</th>
                        </tr>
                    </thead>
                    {% for dataset in object_list %}
                        <tr>
                            <td>
                                {% if user_id == dataset.user_id %}
                                    {% include 'general/individualCheckBoxTable.html' %}
                                {% endif %}
                            </td>
                            <td>
                                <a href="{% url 'datasets:ListaDatasetByID' pk=dataset.id %}">{{ dataset.name }}</a>
                            </td>
                            <td>
                                {{ dataset.n_classes }}
                            </td>
                            <td>
                                {{ dataset.n_samples }}
                            </td>
                            <td>
                                {{ dataset.creation_date }}
                            </td>
                            <td>
                                <div class="tooltip">
                                    {{ dataset.numbermodels}}
                                    <span class="tooltiptext">
                                        {% define_single_var forloop.counter0 as counter %}
                                        {% define_int counter dataset.numbermodels as increment %}
                                        {% filter_range counter increment as n_models_by_dataset %}
                                        {% if dataset.numbermodels != 0 %}
                                            {% for i in n_models_by_dataset %}
                                                <p>{{ models | index:i | getattrfilterDict:"cnnmodel__name"}}</p>
                                            {% endfor %}
                                        {% else %}
                                            <p>Nenhum</p>
                                        {% endif %}
                                    </span>
                                </div>
                            </td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
            {% block alertBox %}
                {% include 'general/alertBoxConfirmation.html' %}
            {% endblock %}
            {% block pagination %}
                {% include 'general/pagination.html' %}
            {% endblock %}
            </div>
{#            <div id="buttonOptions">#}
{#                <a href="{% url 'datasets:criaDataset' %}" class="criaDataset">Criar Novo</a>#}
{#            </div>#}
        </div>

        <!-- Prior definition of variables to pass to js file-->
        <script>
            var user_id = {{ user_id }};
        </script>

        <!-- Call Javascript file -->
        <script src="{% static 'dataset/js/listDatasets.js'%}"></script>

{% endblock %}